<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Playboy Magazine Database</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content="A database system for managing Playboy magazine collection data" />
<meta name="theme-color" content="#6b5cff" />
<link rel="manifest" href="manifest.json" />
<link rel="stylesheet" href="css/style.css" />
</head>
<body>

<h1>Playboy Magazine Database</h1>

<div class="section">
  <div class="controls">
    <input type="file" id="csvFileInput" accept=".csv" style="display: none;" />
    <input type="file" id="backupFileInput" accept=".json" style="display: none;" />
    <button id="loadBtn" class="btn">Load CSV File</button>
    <button id="restoreBtn" class="btn">Restore Backup</button>
    <button id="newRecordBtn" class="btn btn-primary hidden">New Record</button>
    <button id="sortChronologicalBtn" class="btn hidden">üìÖ Sort Chronologically</button>
    <button id="exportBtn" class="btn hidden">Export Data</button>
    <button id="resetBtn" class="btn btn-secondary">Reset Database</button>
  </div>
</div>

<div class="section hidden" id="filterStatsToggleSection">
  <div class="search-toggle">
    <button type="button" id="toggleFiltersBtn" class="btn">üîç Filters</button>
    <button type="button" id="toggleStatsBtn" class="btn">üìä Statistics <span class="caret">‚ñ∂</span></button>
  </div>
  
  <form id="filterForm" class="filters hidden">
    <div class="filter-row">
      <label for="magazineFilter">Filter by Magazine:</label>
      <select id="magazineFilter">
        <option value="">All Magazines</option>
      </select>
    </div>
    
    <div class="filter-row">
      <label for="monthFilter">Filter by Month:</label>
      <select id="monthFilter">
        <option value="">All Months</option>
        <option value="January">January</option>
        <option value="February">February</option>
        <option value="March">March</option>
        <option value="April">April</option>
        <option value="May">May</option>
        <option value="June">June</option>
        <option value="July">July</option>
        <option value="August">August</option>
        <option value="September">September</option>
        <option value="October">October</option>
        <option value="November">November</option>
        <option value="December">December</option>
      </select>
    </div>
    
    <div class="filter-row">
      <span style="font-size: 14px; color: var(--muted); min-width: 120px; display: flex; align-items: center;">Year Range:</span>
      <label for="yearFromFilter" style="position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0;">From Year</label>
      <select id="yearFromFilter">
        <option value="">From Year</option>
      </select>
      <span style="margin: 0 8px; color: var(--muted);">-</span>
      <label for="yearToFilter" style="position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0;">To Year</label>
      <select id="yearToFilter">
        <option value="">To Year</option>
      </select>
    </div>
    
    <div class="filter-row">
      <label for="yearFilter">Or Filter by Single Year:</label>
      <select id="yearFilter">
        <option value="">All Years</option>
      </select>
    </div>
    
    <div class="filter-row">
      <label for="specialOnly">
        <input type="checkbox" id="specialOnly" /> Special Issues Only
      </label>
    </div>
    
    <div class="filter-row">
      <button type="button" id="clearFiltersBtn" class="btn btn-secondary" style="padding: 6px 16px; font-size: 13px;">Clear All Filters</button>
    </div>
  </form>
</div>

<div class="section hidden" id="statsSection">
  <div class="stats" id="stats"></div>
</div>

<div class="section hidden" id="searchSection">
  <div class="search-section">
    <label for="searchInput" class="search-label">Search:</label>
    <input type="text" id="searchInput" placeholder="Search magazines, special issues, years, months..." />
  </div>
</div>

<div class="section">
  <div class="table-container">
    <table id="magazineTable">
      <thead class="hidden">
        <tr>
          <th class="sortable" data-column="magazine">Magazine <span class="sort-indicator"></span></th>
          <th class="sortable" data-column="month">Month <span class="sort-indicator"></span></th>
          <th class="sortable" data-column="year">Year <span class="sort-indicator"></span></th>
          <th class="sortable" data-column="special">Special <span class="sort-indicator"></span></th>
          <th class="sortable" data-column="created">Created <span class="sort-indicator"></span></th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="tableBody">
        <tr>
          <td colspan="6" class="empty">No data loaded. Click "Load CSV Data" to begin.</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal for Create/Edit -->
<div id="recordModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="modalTitle">New Magazine Record</h2>
      <button class="modal-close" onclick="closeModal()">&times;</button>
    </div>
    <form id="recordForm">
      <input type="hidden" id="recordId" />
      
      <div class="form-group">
        <label for="magazineName">Magazine *</label>
        <input type="text" id="magazineName" list="magazineOptions" required placeholder="Type or select magazine name" />
        <datalist id="magazineOptions">
          <option value="Playboy">Playboy</option>
          <option value="Penthouse">Penthouse</option>
          <option value="Oui">Oui</option>
        </datalist>
      </div>
      
      <div class="form-group">
        <label for="monthFull">Month *</label>
        <select id="monthFull" required>
          <option value="">Select Month</option>
          <option value="January">January</option>
          <option value="February">February</option>
          <option value="March">March</option>
          <option value="April">April</option>
          <option value="May">May</option>
          <option value="June">June</option>
          <option value="July">July</option>
          <option value="August">August</option>
          <option value="September">September</option>
          <option value="October">October</option>
          <option value="November">November</option>
          <option value="December">December</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="year">Year *</label>
        <input type="text" id="year" maxlength="2" required placeholder="e.g., 65 (will become 1965)" />
      </div>
      
      <div class="form-group">
        <label for="special">Special Issue Description</label>
        <input type="text" id="special" placeholder="e.g., Anniversary Issue" />
      </div>
      
      <div class="form-group">
        <label for="isSpecial">
          <input type="checkbox" id="isSpecial" />
          Mark as Special Issue
        </label>
      </div>
      
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
        <button type="submit" class="btn btn-primary">Save Record</button>
      </div>
    </form>
  </div>
</div>

<script src="js/database.js"></script>
<script src="js/app.js"></script>
</body>
</html>
